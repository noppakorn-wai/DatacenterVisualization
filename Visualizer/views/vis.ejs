<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>DataVis.</title>
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <!-- Bootstrap 3.3.2 -->
  <link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <!-- Font Awesome Icons -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <!-- Ionicons -->
  <link href="https://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
  <!-- Theme style -->
  <link href="./css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
  <link href="./css/AdminLTE.skin-blue.min.css" rel="stylesheet" type="text/css" />
  <link href="./css/status.css" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body class="skin-blue sidebar-collapse">
  <div class="wrapper">

    <!-- Main Header -->
    <header class="main-header">

      <!-- Logo -->
      <a href="/vis" class="logo"><b>DataVis.</b></a>

      <!-- Header Navbar -->
      <nav class="navbar navbar-static-top" role="navigation">
        <!-- Sidebar toggle button-->
        <!--<a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
          <span class="sr-only">Toggle navigation</span>
        </a>-->
        <!-- Navbar Right Menu -->
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            <!-- Messages: style can be found in dropdown.less-->
            <!-- <li class="dropdown messages-menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-envelope-o"></i>
                  <span class="label label-success">4</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 4 messages</li>
                  <li>
                    <ul class="menu">
                      <li>
                        <a href="#">
                          <div class="pull-left">
                            <img src="./img/user2-160x160.jpg" class="img-circle" alt="User Image"/>
                          </div>
                          <h4>
                            Support Team
                            <small><i class="fa fa-clock-o"></i> 5 mins</small>
                          </h4>
                          <p>Why not buy a new awesome theme?</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="footer"><a href="#">See All Messages</a></li>
                </ul>
              </li> -->

            <!-- Notifications Menu -->
            <!-- <li class="dropdown notifications-menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-bell-o"></i>
                  <span class="label label-warning">10</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 10 notifications</li>
                  <li>
                    <ul class="menu">
                      <li>
                        <a href="#">
                          <i class="fa fa-users text-aqua"></i> 5 new members joined today
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="footer"><a href="#">View all</a></li>
                </ul>
              </li> -->

            <!-- <li class="dropdown tasks-menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-flag-o"></i>
                  <span class="label label-danger">9</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 9 tasks</li>
                  <li>
                    <ul class="menu">
                      <li>
                        <a href="#">
                          <h3>
                            Design some buttons
                            <small class="pull-right">20%</small>
                          </h3>
                          <div class="progress xs">
                            <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                              <span class="sr-only">20% Complete</span>
                            </div>
                          </div>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="footer">
                    <a href="#">View all tasks</a>
                  </li>
                </ul>
              </li> -->

            <!-- User Account Menu -->
            <!--<li class="dropdown user user-menu">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <img src="./img/user2-160x160.jpg" class="user-image" alt="User Image" />
                <span class="hidden-xs">Alexander Pierce</span>
              </a>
              <ul class="dropdown-menu">
                <li class="user-header">
                  <img src="./img/user2-160x160.jpg" class="img-circle" alt="User Image" />
                  <p>
                    Tester - Test user
                    <small>Member since Nov. 2012</small>
                  </p>
                </li>
                <li class="user-body">
                  <div class="col-xs-4 text-center">
                    <a href="#">Followers</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Sales</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Friends</a>
                  </div>
                </li>
                <li class="user-footer">
                  <div class="pull-left">
                    <a href="#" class="btn btn-default btn-flat">Profile</a>
                  </div>
                  <div class="pull-right">
                    <a href="#" class="btn btn-default btn-flat">Sign out</a>
                  </div>
                </li>
              </ul>
            </li>-->
          </ul>
        </div>
      </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">
      <section class="sidebar">
        <ul class="sidebar-menu">
          <li class="header">HEADER</li>

          <li class="active">
            <a href="#">
              <span>Link</span>
            </a>
            <</li>
              <li>
                <a href="#">
                  <span>Another Link</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#">
                  <span>Multilevel</span> <i class="fa fa-angle-left pull-right"></i></a>
                <ul class="treeview-menu">
                  <li><a href="#">Link in level 2</a></li>
                  <li><a href="#">Link in level 2</a></li>
                </ul>
              </li>
        </ul>
      </section>
    </aside>

    <div class="content-wrapper">
      <section class="content-header">
        <h1>
          Graph navigator
          <!--<small>Optional description</small>-->
        </h1>
        <form action="#" method="get" class="sidebar-form" style="position: absolute;top: 0px;right: 6px;width:200px">
          <div class="input-group">
            <input type="text" id="search" name="q" class="form-control" placeholder="Search in graph...">
            <span class="input-group-btn">
              <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i></button>
            </span>
          </div>
        </form>
      </section>

      <section class="content">
        <div class="row">
          <div class="col-md-9">
            <div class="col-md-12">
              <div class="box box-window-height">
                <div class="box-header with-border">
                  <h3 style="display:inline;">Current location : </h3>
                  <h3 class="box-title breadcrumb" id="breadcrumb"></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse"><i class="fa fa-minus"></i></button>
                  </div>
                </div>
                <div class="box-body">
                  <div id="alert-pane">
                    <a id="alert">
                      <h4>Alert&nbsp;&nbsp;
                        <span class="badge"><b>0</b></span>
                      </h4>
                    </a>
                  </div>
                  <div id="warning-pane">
                    <a id="warning">
                      <h4>Warnning&nbsp;&nbsp;
                        <span class="badge"><b>3</b></span>
                      </h4>
                    </a>
                  </div>
                  <div style="position:absolute;right:0;px;top:0px;width:10%;">
                    <div class="label label-info" id="searchCounter"></div>
                  </div>
                  <div style="position:absolute;left:0px;top:170px;width:10%;z-index: 1;">
                    <div class="label label-warning" id="warnningDetail"></div>
                  </div>
                  <div id="graph-container" style="width:100%;height:100%">
                  </div>
                </div>
              </div>
            </div>
            <!--<div class="col-md-12">
              <div class="box">
                <div class="box-header with-border collapsed-box">
                  <h3 style="display:inline;">Current location : </h3>
                  <h3 class="box-title breadcrumb" id="breadcrumb"></h3>
                  <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse"><i class="fa fa-minus"></i></button>
                  </div>
                </div>
                <div class="box-body">
                </div>
              </div>
            </div>-->
          </div>
          <div class="col-md-3">
            <div class="col-md-12">
              <div class="box box-window-height">
                <div class="box-header with-border">
                  <h4 style="display:inline;">Details of : </h4>
                  <h4 class="box-title breadcrumb" id="visNodeName"></h4>
                  <!--<div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Collapse"><i class="fa fa-minus"></i></button>
                  </div>-->
                </div>
                <div class="box-body" style="overflow: overlay;">
                  <div id="visNodeDetail"></div>
                  <!--<div class="page-header">
                      <span>Status</span>
                    </div>
                    <div id="visNodeStatus"></div>-->
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" id="performanceChartArea">
        </div>
      </section>


      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h1 class="modal-title" id="myModalLabel" style="color:rgb(255, 165, 0);">Warning</h4>
            </div>
            <div class="modal-body">
              <a class="label label-warning" style="font-size:25px;" onclick="hMem()">High memory usage</a>
              <br/>
              <br/>
              <a class="label label-warning" style="font-size:25px;" onclick="vmMem()">High memory usage</a>
              <br/>
              <br/>
              <a class="label label-warning" style="font-size:25px;" onclick="dupIP()">IP duplicated</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /.content-wrapper -->
  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED JS SCRIPTS -->

  <!-- jQuery 2.1.3 -->
  <script src="./js/jQuery-2.1.3.min.js"></script>
  <!-- Bootstrap 3.3.2 JS -->
  <script src="./js/bootstrap.min.js" type="text/javascript"></script>
  <!-- AdminLTE App -->
  <script src="./js/app.min.js" type="text/javascript"></script>
  <!-- Sparkline graph plugin -->
  <script src="./js/jquery.sparkline.min.js" type="text/javascript"></script>

  <!-- Optionally, you can add Slimscroll and FastClick plugins.
          Both of these plugins are recommended to enhance the
          user experience -->

  <!--based dependency-->
  <script type="text/javascript" src="./js/sigma.min.js"></script>
  <script type="text/javascript" src="./js/async.js"></script>
  <!--sigma plugins-->
  <script type="text/javascript" src="./js/sigma-plugins/sigma.plugins.filter.min.js"></script>
  <script type="text/javascript" src="./js/sigma-plugins/sigma.plugins.animate.min.js"></script>
  <!--vis data query api-->
  <script type="text/javascript" src="./js/vis/vis.api.js"></script>
  <!--vis custom rendering-->
  <script type="text/javascript" src="./js/vis/vis.renderer.js"></script>
  <!--vis dependency-->
  <script type="text/javascript" src="./js/vis/vis.pos.js"></script>
  <script type="text/javascript" src="./js/vis/vis.event.js"></script>
  <script type="text/javascript" src="./js/vis/vis.filter.js"></script>
  <script type="text/javascript" src="./js/vis/vis.panel.js"></script>
  <!--testing data-->
  <script type="text/javascript" src="./js/other/data.ce.translated.js"></script>
  <!--vis core-->
  <script type="text/javascript" src="./js/vis/vis.core.js"></script>
  <!--vis plugins-->
  <script type="text/javascript" src="./js/vis-plugins/vis.plugins.performanceResolver.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      resizeBox();
      $("button[data-widget='collapse']").each(function() {
        $(this).on('click', function() {
          var headerHeight = $(this).parent().parent().outerHeight();
          var thisBox = $(this).parent().parent().parent();
          if (thisBox.height() <= headerHeight + 1 && thisBox.height() >= headerHeight - 1) {
            if ($(window).width() < 992) {
              $(".box-window-height").height((($(window).height() - $(".navbar").height() - 94) / 2.1) + "px");
            } else {
              $(".box-window-height").height($(window).height() - $(".navbar").height() - 94 + "px");
            }
          } else {
            thisBox.height(headerHeight);
          }
        });
      });
      async.series([
        initNodes,
        initEdges,
      ], function(err, result) {
        if (result[0].err === "" && result[1].err === "") {
          var nodes = result[0].data;
          var edges = result[1].data;
          init(nodes, edges);
        } else {
          console.error("Connection fail", err);
          init(nodes_1, edges_1);
        }
      });

      $(window).resize(function() {
        resizeBox();
      });

      function resizeBox(height) {
        if (!height) {
          if ($(window).width() < 992) {
            $(".box-window-height").height((($(window).height() - $(".navbar").height() - 94) / 2.1) + "px");
            $(".box-window-half-height").height((($(window).height() - $(".navbar").height() - 94) / 2.1) / 2 + "px");
          } else {
            $(".box-window-height").height($(window).height() - $(".navbar").height() - 94 + "px");
            $(".box-window-half-height").height(($(window).height() - $(".navbar").height() - 94) / 2 + "px");
          }
        } else {
          $(".box-window-height").height(height + "px");
          $(".box-window-half-height").height(height / 2 + "px");
        }

        $(".box-window-height, .box-window-half-height").each(function() {
          var header = $(this).find(".box-header");
          var body = $(this).find(".box-body");
          body.height($(this).height() - header.outerHeight() - 31);
        });
      }

      function init(nodes, edges) {
        s = initSigma("graph-container", "group-d1", nodes, edges);
        initCustomNode(s);
        initFilter(s);
        initPerformanceResolver(s);
        initVis(s);
        s.reposition("group-d1", function() {
          s.camera.goTo({
            x: s.getCenter().x,
            y: s.getCenter().y,
            ratio: 3
          });
          s.refresh();
        });
        initEvent(s);
      }
    });
  </script>
  <script type="text/javascript">
    $("#warning-pane").on("click", function() {
      $('#myModal').modal();
    });

    function hMem() {
      var n = s.graph.nodes("n431");
      s.dispatchEvent('clickNode', {
        node: n
      });
      n = s.graph.nodes("n431/VMs");
      s.dispatchEvent('clickNode', {
        node: n
      });
      n = s.graph.nodes("n431/Networks");
      s.dispatchEvent('clickNode', {
        node: n
      });
      n = s.graph.nodes("n431");
      $(".close").click();
      $("#warnningDetail").html("Detect high memory consumption on host " + n.label);
    }

    function vmMem() {
      var n = s.graph.nodes("n422");
      s.dispatchEvent('clickNode', {
        node: n
      });
      $(".close").click();
      $("#warnningDetail").html("Detect high memory consumption on vm " + n.label);
    }

    function dupIP() {
      var n = s.graph.nodes("n370");
      s.dispatchEvent('clickNode', {
        node: n
      });
      n = s.graph.nodes("n370/VMs");
      s.dispatchEvent('clickNode', {
        node: n
      });
      n = s.graph.nodes("n370/Networks");
      s.dispatchEvent('clickNode', {
        node: n
      });
      var n1 = s.graph.nodes("n428");
      var n2 = s.graph.nodes("n430");
      $("#warnningDetail").html("IP of vm " + n1.label + " and " + n2.label + " are duplicate (10.0.1.1)");
      $(".close").click();
    }
  </script>
</body>

</html>